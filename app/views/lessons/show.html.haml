- content_for :title do
  App
  \|
  Course
  = @course.title
  \|
  Lesson
  = @lesson.title

= link_to 'Courses', courses_path
\/
= link_to @lesson.course.title, course_path(@lesson.course)
\/
= link_to @lesson.title, course_lesson_path(@course, @lesson)
%p

.row
  .col-lg-8
    = render 'lessons/lesson', lesson: @lesson
    - if @lesson.video.attached?
      %video(controls="true" poster="#{url_for @lesson.video_thumbnail}" width="100%" preload="metadata")
        %source{src: rails_blob_url(@lesson.video), type:"#{@lesson.video.content_type}" }
    - if @lesson.video_thumbnail.attached?
      = image_tag @lesson.video_thumbnail, width: "30%", height: "50px"
    %p
  .col-lg-4
    %ul.list-group
      %li.list-group-item
        .fa.fa-graduation-cap
        = link_to @course.title, course_path(@course)
        .float-right
          .fa.fa-spinner
          = number_to_percentage(@course.progress(current_user), precision: 0)
      - @lessons.each do |lesson|
        - if lesson == @lesson
          %li.list-group-item.list-group-item-success
            = render 'lessons/lesson_preview', lesson: lesson
        - else
          %li.list-group-item
            = render 'lessons/lesson_preview', lesson: lesson

